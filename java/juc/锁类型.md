# 无锁


# 偏向锁

为了减少线程切换消耗,偏向锁会偏向第一个获取锁的线程

大多数多线程情况下,不仅不存在线程竞争,而是由同一个线程多次获得锁

在只有一个线程时,不会释放锁,直接操作(减少消耗)

# 轻量锁

多线程竞争下,任意时间只有一个线程,没有冲突

线程会通过cas竞争锁,而不是直接阻塞

jdk6之前: 当线程cas自旋达到10次后或自旋线程达到cpu核数一半时,轻量锁会升级为重量锁

jdk6之后: 能够根据当前运行时的情况来自动调整自旋等待的时间，以优化性能

# 重量锁

# 总结

|     | 优点                     | 缺点          |
| :-: | ---------------------- | ----------- |
| 偏向锁 | 加减锁不需要额外消耗             | 只适用于一个线程竞争锁 |
| 轻量锁 | 多线程竞争下不会阻塞,响应时间**非常快** | 长期自旋消耗资源    |
| 重量锁 | 不自旋,不消耗,总体**吞吐量大**     | 线程阻塞,响应时间慢  |
